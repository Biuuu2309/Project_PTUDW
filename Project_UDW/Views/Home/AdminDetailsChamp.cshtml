@{
    ViewData["Title"] = "Details Skill Champ";
    Layout = "~/Views/Shared/Master.cshtml";

}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>@ViewData["Title"]</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="~/css/AdminDetailsChamp.css">
<!-- jQuery should be loaded here -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<div id="adddetailschampModal" class="modal fade" tabindex="-1" aria-labelledby="ShowModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Detail Champ Form</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="adddetailschampForm">
                    <div class="mb-3">
                        <label for="adddcChampName" class="form-label">Champ Name</label>
                        <input type="text" class="form-control" id="adddcChampName" name="adddcChampName" required>
                    </div>
                    <div class="mb-3">
                        <label for="adddame_nt" class="form-label">Dame noi tai</label>
                        <input type="text" class="form-control" id="adddame_nt" name="adddame_nt" required>
                    </div>
                    <div class="mb-3">
                        <label for="adddame_q" class="form-label">Dame Q</label>
                        <input type="text" class="form-control" id="adddame_q" name="adddame_q" required>
                    </div>
                    <div class="mb-3">
                        <label for="adddame_w" class="form-label">Dame W</label>
                        <input type="text" class="form-control" id="adddame_w" name="adddame_w" required>
                    </div>
                    <div class="mb-3">
                        <label for="adddame_e" class="form-label">Dame E</label>
                        <input type="text" class="form-control" id="adddame_e" name="adddame_e" required>
                    </div>
                    <div class="mb-3">
                        <label for="adddame_r" class="form-label">Dame R</label>
                        <input type="text" class="form-control" id="adddame_r" name="adddame_r" required>
                    </div>
                    <div class="mb-3">
                        <label for="adddetail_NN" class="form-label">NN Nerf</label>
                        <input type="text" class="form-control" id="adddetail_NN" name="adddetail_NN" required>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="Submit_Add_Details_Champ()">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="deletedetailschampModal" class="modal fade" tabindex="-1" aria-labelledby="ShowModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete Details Champ Form</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="deletedetailschampForm">
                    <div class="mb-3">
                        <label for="deldetailschamp" class="form-label">Champ Name</label>
                        <input type="text" class="form-control" id="deldetailschamp" name="deldetailschamp" required>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="Submit_Delete_Details_Champ()">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="updatedetailschampModal" class="modal fade" tabindex="-1" aria-labelledby="ShowModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Update Details Champ Form</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="updatedetailschampForm">
                    <div class="mb-3">
                        <label for="updcChampName" class="form-label">Champ Name</label>
                        <input type="text" class="form-control" id="updcChampName" name="updcChampName" required>
                    </div>
                    <div class="mb-3">
                        <label for="updame_nt" class="form-label">Dame noi tai</label>
                        <input type="text" class="form-control" id="updame_nt" name="updame_nt" required>
                    </div>
                    <div class="mb-3">
                        <label for="updame_q" class="form-label">Dame Q</label>
                        <input type="text" class="form-control" id="updame_q" name="updame_q" required>
                    </div>
                    <div class="mb-3">
                        <label for="updame_w" class="form-label">Dame W</label>
                        <input type="text" class="form-control" id="updame_w" name="updame_w" required>
                    </div>
                    <div class="mb-3">
                        <label for="updame_e" class="form-label">Dame E</label>
                        <input type="text" class="form-control" id="updame_e" name="updame_e" required>
                    </div>
                    <div class="mb-3">
                        <label for="updame_r" class="form-label">Dame R</label>
                        <input type="text" class="form-control" id="updame_r" name="updame_r" required>
                    </div>
                    <div class="mb-3">
                        <label for="updetail_NN" class="form-label">NN Nerf</label>
                        <input type="text" class="form-control" id="updetail_NN" name="updetail_NN" required>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="Submit_Update_Details_Champ()">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid">
    <div class="row add_detailschamp_main">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-9"></div>
                        <div class="col-md-1 col-md-offset-4 alert alert-info add_btn" onclick="Add_Details_Champ()">
                            <a style="float: right; cursor: pointer">Add a details champ</a>
                        </div>
                        <div class="col-md-1 col-md-offset-4 alert alert-info add_btn" onclick="Delete_Details_Champ()">
                            <a style="float: right; cursor: pointer">Delete a details champ</a>
                        </div>
                        <div class="col-md-1 col-md-offset-4 alert alert-info add_btn" onclick="Update_Details_Champ()">
                            <a style="float: right; cursor: pointer">Update a details champ</a>
                        </div>
                    </div>
                    <h4 class="card-title">Details Skill Champ</h4>
                    <h6 class="card-title mt-5"><i class="me-1 font-18 mdi mdi-numeric-1-box-multiple-outline"></i>Details</h6>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">STT</th>
                                    <th scope="col">Champ Name</th>
                                    <th scope="col">Dame Noi Tai</th>
                                    <th scope="col">Dame Q</th>
                                    <th scope="col">Dame W</th>
                                    <th scope="col">Dame E</th>
                                    <th scope="col">Dame R</th>
                                    <th scope="col">Nguyen Nhan Nerf</th>
                                </tr>
                            </thead>
                            <tbody id="detailschampTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function Add_Details_Champ() {
        var modal = new bootstrap.Modal(document.getElementById('adddetailschampModal'), {
            keyboard: false
        });
        modal.show();
    }
    function Delete_Details_Champ() {
        var modal = new bootstrap.Modal(document.getElementById('deletedetailschampModal'), {
            keyboard: false
        });
        modal.show();
    }
    function Update_Details_Champ() {
        var modal = new bootstrap.Modal(document.getElementById('updatedetailschampModal'), {
            keyboard: false
        });
        modal.show();
    }
    function Submit_Add_Details_Champ() {
        var formData = {
            champname: $('#adddcChampName').val(),
            dame_nt: $('#adddame_nt').val(),
            dame_q: $('#adddame_q').val(),
            dame_w: $('#adddame_w').val(),
            dame_e: $('#adddame_e').val(),
            dame_r: $('#adddame_r').val(),
            detail_NN: $('#adddetail_NN').val()
        };

        $.ajax({
            type: "POST",
            url: "/api/AdminDetailsChamp/AddDetailsUpChamp",
            data: JSON.stringify(formData),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                if (response.statusCode === 200) {
                    alert("Add details champ successful: " + response.statusMessage);
                    $('#adddetailschampModal').modal('hide');
                    $('#adddetailschampForm')[0].reset();
                    location.reload();

                } else {
                    alert("Add details champ failed: " + response.statusMessage);
                }
            },
            error: function (error) {
                console.error("AJAX error response:", error);
                alert("Error during add details champ.");
            }
        });
    }
    function Submit_Update_Details_Champ() {
        var formData = {
            champname: $('#updcChampName').val(),
            dame_nt: $('#updame_nt').val(),
            dame_q: $('#updame_q').val(),
            dame_w: $('#updame_w').val(),
            dame_e: $('#updame_e').val(),
            dame_r: $('#updame_r').val(),
            detail_NN: $('#updetail_NN').val()
        };
        $.ajax({
            type: "POST",
            url: "/api/AdminDetailsChamp/UpdateDetailsUpChamp",
            data: JSON.stringify(formData),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                if (response.statusCode === 200) {
                    alert('Details champ updated successfully!');
                    $('#updatedetailschampModal').modal('hide');
                    $('#updatedetailschampForm')[0].reset();
                    location.reload();
                } else {
                    alert('Update failed: ' + response.statusMessage);
                }
            },
            error: function (error) {
                console.error('AJAX error:', error);
                alert('Error updating details champ');
            }
        });
    }
    function Submit_Delete_Details_Champ() {
        var formData = {
            champname: $('#deldetailschamp').val()
        };

        $.ajax({
            type: "POST",
            url: "/api/AdminDetailsChamp/DeleteDetailsUpChamp",
            data: JSON.stringify(formData),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                if (response.statusCode === 200) {
                    alert("Delete details champ successful: " + response.statusMessage);
                    $('#deletedetailschampModal').modal('hide');
                    $('#deletedetailschampForm')[0].reset();
                    location.reload();

                } else {
                    alert("Delete details champ failed: " + response.statusMessage);
                }
            },
            error: function (error) {
                console.error("AJAX error response:", error);
                alert("Error during delete details champ.");
            }
        });
    }
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "/api/AdminDetailsChamp/GetDetailsUpChamp",
            dataType: "json",
            success: function (data) {
                var tbody = $('#detailschampTableBody');
                tbody.empty();
                data.forEach(function (dc, index) {
                    var row = '<tr>' +
                        '<th scope="row">' + (index + 1) + '</th>' +
                        '<td>' + dc.champName + '</td>' +
                        '<td>' + dc.dame_nt + '</td>' +
                        '<td>' + dc.dame_q + '</td>' +
                        '<td>' + dc.dame_w + '</td>' +
                        '<td>' + dc.dame_e + '</td>' +
                        '<td>' + dc.dame_r + '</td>' +
                        '<td>' + dc.detail_NN + '</td>' +
                        '</tr>';
                    tbody.append(row);
                });
            },
            error: function (error) {
                console.error("Error fetching data:", error);
            }
        });
    });
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result)
                    .width(150)
                    .height(200);
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

</script>